{{!-- systems/adm-daggerheart/templates/partials/defense-dialog.hbs --}}

<section class="adm-roll adm-defense" data-adm-defense>

  {{!-- Заголовок: урон + тип --}}
  <div class="adm-defense-header">
    <span class="adm-defense-total">{{dmg}} {{damageTypeLabel}} урона</span>
  </div>

  {{!-- Оценка --}}
  <div class="adm-defense-assess" data-adm-defense-assess>
    <span class="adm-defense-severity" data-adm-defense-severity>{{severityLabel}}, вы получите {{woundsLabel}}.</span>
    <button type="button" class="adm-defense-variants-btn" data-adm-defense-variants-btn>Прочие варианты</button>
    <div class="adm-defense-variants" data-adm-defense-variants hidden>
      {{#each allSeverities as |s|}}
        <div class="adm-defense-variant {{#if s.active}}is-active{{/if}}">{{s.label}}, вы получите {{s.woundsLabel}}.</div>
      {{/each}}
    </div>
  </div>

  {{!-- Стресс --}}
  {{#if stress}}
    <div class="adm-defense-stress">
      <i class="fa-solid fa-droplet"></i> +{{stress}} стресс
    </div>
  {{/if}}

  {{!-- Кнопка брони --}}
  <div class="adm-defense-armor-row">
    <button type="button" class="adm-defense-armor-btn {{#if armorActive}}is-active{{/if}}" data-adm-defense-armor {{#unless canUseArmor}}disabled{{/unless}}>
      <i class="fa-solid fa-shield-halved"></i>
      <span data-adm-defense-armor-text>{{armorValue}}/{{armorMax}}</span>
    </button>
  </div>

  {{!-- Опции --}}
  <div class="adm-defense-options">
    <label class="adm-defense-opt">
      <input type="checkbox" data-adm-defense-cancel-wound>
      <span>Отменить 1 рану</span>
    </label>
    <label class="adm-defense-opt">
      <input type="checkbox" data-adm-defense-extra-armor>
      <span>Позволить трату доп. брони</span>
    </label>
  </div>

  {{!-- Статусы (заглушка) --}}
  <div class="adm-defense-statuses">
    <span class="adm-defense-statuses-label">Статусы влияющие на защиту:</span>
    <div class="adm-defense-statuses-list" data-adm-defense-statuses>—</div>
  </div>

  {{!-- Кнопка применения --}}
  <button type="button" class="adm-defense-submit" data-adm-defense-submit>
    Получить <span data-adm-defense-submit-text>{{woundsLabel}}</span>
  </button>
</section>
