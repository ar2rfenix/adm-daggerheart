{{!-- systems/adm-daggerheart/templates/partials/defense-dialog.hbs --}}

<section class="adm-roll adm-defense" data-adm-defense>

  {{!-- Заголовок: урон + тип (редактируемое число) --}}
  <div class="adm-defense-header">
    <span class="adm-defense-total"><input type="text" class="adm-defense-dmg-input" data-adm-defense-dmg value="{{dmg}}" inputmode="numeric" autocomplete="off" spellcheck="false"> {{damageTypeLabel}} урона</span>
  </div>

  {{!-- Оценка --}}
  <div class="adm-defense-assess" data-adm-defense-assess>
    <span class="adm-defense-severity" data-adm-defense-severity>{{severityLabel}}, вы получите {{woundsLabel}}.</span>
  </div>

  {{!-- Стресс --}}
  {{#if stress}}
    <div class="adm-defense-stress">
      <i class="fa-solid fa-droplet"></i> +{{stress}} стресс
    </div>
  {{/if}}

  {{!-- Кнопка брони --}}
  <div class="adm-defense-armor-row">
    <button type="button" class="adm-defense-armor-btn {{#if armorActive}}is-active{{/if}}" data-adm-defense-armor {{#unless canUseArmor}}disabled{{/unless}}>
      <i class="fa-solid fa-shield-halved"></i>
      <span data-adm-defense-armor-text>{{armorValue}}/{{armorMax}}</span>
    </button>
  </div>

  {{!-- Опции (кнопки, могут нажиматься многократно) --}}
  <div class="adm-defense-options">
    <button type="button" class="adm-defense-opt-btn" data-adm-defense-cancel-wound>Отменить 1 рану</button>
    <button type="button" class="adm-defense-opt-btn" data-adm-defense-extra-armor>Позволить трату доп. брони</button>
  </div>

  {{!-- Статусы (заглушка) --}}
  <div class="adm-defense-statuses">
    <span class="adm-defense-statuses-label">Статусы влияющие на защиту:</span>
    <div class="adm-defense-statuses-list" data-adm-defense-statuses>—</div>
  </div>

  {{!-- Кнопка применения --}}
  <button type="button" class="adm-defense-submit" data-adm-defense-submit>
    Получить <span data-adm-defense-submit-text>{{woundsLabel}}</span>
  </button>
</section>
